<main class="mat-typography">
  <button
    *ngIf="this.pageState == DetailPageState.EXISTS_ACTIVE"
    class="deactivate-need-button"
    mat-flat-button
    color="primary"
    (click)="openDialog()"
  >
    Ukonči Hľadanie
  </button>
  <mat-card *ngIf="navigatedFromPlayerNeedAddition" class="congratulations">
    <mat-card-content>
      <p>Gratulujem, v tomto momente sme pre Teba začali hľadať tím.</p>

      <p>
        Hľadanie môžeš kedykoľvek ukončiť na tejto stránke. Link na ňu sa
        nachádza aj v potvrddzovacom e-maili, ktorý by mal práve pristávať v
        Tvojom inboxe.
      </p>

      <p>
        Akonáhle pre Teba nájdeme vhodný tím, pošleme Ti ďaľší e-mail. V ňom
        nájdeš aj kontakt. Na ďaľších detailoch sa už dohodneš s Tvojim novým
        tímom.
      </p>
    </mat-card-content>
  </mat-card>
  <mat-card
    class="summary"
    [ngClass]="{
      'summary--inactive': this.pageState == DetailPageState.EXISTS_NOT_ACTIVE,
      'summary--error': this.pageState == DetailPageState.DOES_NOT_EXIST
    }"
  >
    <mat-card-header
      ><mat-card-title>{{ getSummaryTitle() }}</mat-card-title>
    </mat-card-header>
    <mat-card-content *ngIf="this.pageState == DetailPageState.DOES_NOT_EXIST">
      <p>Takéto hľadanie neexistuje, pravdepodobne máš chybný link</p>
    </mat-card-content>
    <mat-card-content
      *ngIf="
        (this.pageState == DetailPageState.EXISTS_NOT_ACTIVE ||
          this.pageState == DetailPageState.EXISTS_ACTIVE) &&
        playerNeed
      "
    >
      <mat-list role="list">
        <mat-list-item role="listitem">
          <h4 matListItemTitle>{{ playerNeed.playerName }}</h4>
          <p matListItemLine>Meno</p>
        </mat-list-item>
        <mat-list-item role="listitem">
          <h4 matListItemTitle>{{ getDistrictNames() }}</h4>
          <p matListItemLine>Okresy kde chcem hrať</p>
        </mat-list-item>
        <mat-list-item role="listitem">
          <h4 matListItemTitle>{{ playerNeed.availability }}</h4>
          <p matListItemLine>Kedy chcem hrať</p>
        </mat-list-item>
        <mat-list-item role="listitem">
          <h4 matListItemTitle>{{ playerNeed.email }}</h4>
          <p matListItemLine>Email</p>
        </mat-list-item>
        <mat-list-item role="listitem">
          <h4 matListItemTitle>{{ playerNeed.phone || "-" }}</h4>
          <p matListItemLine>Telefón</p>
        </mat-list-item>
        <mat-list-item role="listitem">
          <h4 matListItemTitle>{{ playerNeed.about || "-" }}</h4>
          <p matListItemLine>O mne</p>
        </mat-list-item>
        <mat-list-item role="listitem">
          <h4 matListItemTitle>{{ playerNeed.dateAdded | date : "d. L. yyyy o h:mm" }}
          </h4>
          <p matListItemLine>Vytvorené</p>
        </mat-list-item>
        <mat-list-item
          role="listitem"
          *ngIf="this.pageState == DetailPageState.EXISTS_NOT_ACTIVE"
        >
          <h4 matListItemTitle>{{ playerNeed.dateDeactivated | date : "d. L. yyyy o h:mm" }}
          </h4>
          <p matListItemLine>Ukončené</p>
        </mat-list-item>
      </mat-list>
    </mat-card-content>
  </mat-card>

  <mat-card
    class="marketing"
    *ngIf="
      (this.pageState == DetailPageState.EXISTS_NOT_ACTIVE ||
        this.pageState == DetailPageState.EXISTS_ACTIVE) &&
      playerNeed
    "
  >
    <mat-card-header
      ><mat-card-title>Marketing</mat-card-title>
    </mat-card-header>
    <mat-card-content *ngIf="isMarketingConsentGranted()">
      <p>
        Máš aktivovaný odber marketingových emailov.
        <button mat-button color="primary" (click)="revokeMarketingConsent()">Zrušiť.</button>
      </p>
    </mat-card-content>
    <mat-card-content *ngIf="!isMarketingConsentGranted()">
      <p>
        Nemáš aktivovaný odber marketingových emailov.
        <button mat-button color="primary" (click)="grantMarketingConsent()">Aktivovať.</button>
      </p>
    </mat-card-content>
  </mat-card>
</main>
