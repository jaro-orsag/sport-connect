<main class="mat-typography">
  <button
    *ngIf="this.pageState == DetailPageState.EXISTS_ACTIVE"
    class="deactivate-need-button"
    mat-flat-button
    color="primary"
    (click)="openDialog()"
  >
    Zruš Hľadanie
  </button>
  <mat-card *ngIf="navigatedFromPlayerNeedAddition" class="congratulations">
    <mat-card-content>
      <p>Gratulujem, v tomto momente sme pre Teba začali hľadať tím.</p>

      <p>
        Hľadanie môžeš kedykoľvek zrušiť na tejto stránke. Link na ňu sa
        nachádza aj v potvrddzovacom e-maili, ktorý by mal práve pristávať v
        Tvojom inboxe.
      </p>

      <p>
        Akonáhle pre Teba nájdeme vhodný tím, pošleme Ti ďaľší e-mail. V ňom
        nájdeš aj kontakt. Na ďaľších detailoch sa už dohodneš s Tvojim novým
        tímom.
      </p>
    </mat-card-content>
  </mat-card>
  <mat-card
    class="summary"
    [ngClass]="{
      'summary--inactive': this.pageState == DetailPageState.EXISTS_NOT_ACTIVE,
      'summary--error': this.pageState == DetailPageState.DOES_NOT_EXIST
    }"
  >
    <mat-card-header
      ><mat-card-title>{{ getSummaryTitle() }}</mat-card-title>
    </mat-card-header>
    <mat-card-content *ngIf="this.pageState == DetailPageState.DOES_NOT_EXIST">
      <p>Takéto hľadanie neexistuje, pravdepodobne máš chybný link</p>
    </mat-card-content>
    <mat-card-content
      *ngIf="
        (this.pageState == DetailPageState.EXISTS_NOT_ACTIVE ||
          this.pageState == DetailPageState.EXISTS_ACTIVE) &&
        playerNeed
      "
    >
        <app-need-summary-list-item title="Meno" [value]="playerNeed.playerName"></app-need-summary-list-item>
        <app-need-summary-list-item title="Okresy kde chcem hrať" [value]="getDistrictNames()"></app-need-summary-list-item>
        <app-need-summary-list-item title="Kedy chcem hrať" [value]="playerNeed.availability"></app-need-summary-list-item>
        <app-need-summary-list-item title="Email" [value]="playerNeed.email"></app-need-summary-list-item>
        <app-need-summary-list-item title="Telefón" [value]="playerNeed.phone || '-'"></app-need-summary-list-item>
        <app-need-summary-list-item title="O mne" [value]="playerNeed.about || '-'"></app-need-summary-list-item>
        <app-need-summary-list-item title="Vytvorené" [value]="playerNeed.dateAdded | date : 'd. L. yyyy o h:mm'"></app-need-summary-list-item>
        <app-need-summary-list-item 
            *ngIf="this.pageState == DetailPageState.EXISTS_NOT_ACTIVE" 
            title="Ukončené" 
            [value]="playerNeed.dateDeactivated | date : 'd. L. yyyy o h:mm'">
        </app-need-summary-list-item>
    </mat-card-content>
  </mat-card>

  <mat-card
    class="marketing"
    *ngIf="
      (this.pageState == DetailPageState.EXISTS_NOT_ACTIVE ||
        this.pageState == DetailPageState.EXISTS_ACTIVE) &&
      playerNeed
    "
  >
    <mat-card-header
      ><mat-card-title>Marketing</mat-card-title>
    </mat-card-header>
    <mat-card-content *ngIf="playerNeed.isMarketingConsentGranted">
      <p>
        Máš aktivovaný odber marketingových emailov.
        <button mat-button color="primary" (click)="revokeMarketingConsent()">Zrušiť.</button>
      </p>
    </mat-card-content>
    <mat-card-content *ngIf="!playerNeed.isMarketingConsentGranted">
      <p>
        Nemáš aktivovaný odber marketingových emailov.
        <button mat-button color="primary" (click)="grantMarketingConsent()">Aktivovať.</button>
      </p>
    </mat-card-content>
  </mat-card>
</main>
